---
updated: 2023-07-21
title: Get pathname in server components
authors: [joulev]
---

import { File, Folder, Files } from "fumadocs-ui/components/files";

> In client components, `usePathname` is available to get the current pathname. However, in server components, there is no such API. How do I get the pathname in server components?

You can easily use the `params` prop of page components to retrieve the pathname at that particular page. You can then do prop drilling to pass this pathname to child server components. If you don't like prop drilling (me neither), use something like [`server-only-context`](https://github.com/manvalls/server-only-context).

Do note though, as you might have already noticed, that it does not work everywhere. Specifically, if the component is a child of a page component, it should work, as the pathname can be reliably determined.

However, if you use it in a layout component, the pathname cannot be reliably determined. Since a layout is not recomputed when you navigate to a different page, it's only possible to get the pathname until that layout file; the pathname from that layout file onwards cannot be determined. In other words, if you have something like this

<Files>
  <Folder name="app" defaultOpen>
    <Folder name="users" defaultOpen>
      <Folder name="[userId]" defaultOpen>
        <File name="layout.tsx" />
        <Folder name="[appId]" defaultOpen>
          <File name="page.tsx" />
        </Folder>
      </Folder>
    </Folder>
  </Folder>
</Files>

all server components inside `layout.tsx` can only get the pathname until `/users/[userId]`. It canot read `appId`. You need to keep this in mind.

See also: [vercel/next.js#43704](https://github.com/vercel/next.js/issues/43704).



In order for you to reliably get the pathname of the segments in server components, you either have to leverage the parallel routes feature or resort to client components. Parallel routes allows you to create a slot in your layout.tsx in which you use a catch-all route to access child segments of your layout.tsx. The setup goes as follow:

<Files>
  <Folder name="app" defaultOpen>
    <Folder name="users" defaultOpen>
      <Folder name="[userId]" defaultOpen>
        <File name="layout.tsx" />
        <Folder name="[appId]" defaultOpen>
          <File name="page.tsx" />
        </Folder>
        <Folder name="@breadcrumb" defaultOpen>
          <File name="page.tsx" />
          <Folder name="[...slug]" defaultOpen>
            <File name="page.tsx" />
          </Folder>
        </Folder>
      </Folder>
    </Folder>
  </Folder>
</Files>

And in `/app/users/[userId]/layout.tsx` you can create a `breadcrumb: ReactNode` prop in addition to `children` and "slot" it inside the return function just as you do with the `chidlren` node:

```tsx
export default async function UserAppLayout({
  children,
  breadcrumb,
}: Readonly<{
  children: React.ReactNode;
  breadcrumb: React.ReactNode;
}>) {
  return (
    <>
      <nav>
        {breadcrumb}
      </nav>
      <div>
        {children}
      </div>
    </>
  )
}
```

See the demo here: [alfonsusac/nextjs-server-pathname](https://github.com/alfonsusac/nextjs-server-pathname)
